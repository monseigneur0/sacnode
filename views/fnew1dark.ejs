<html>
<head>
    <title>Code Editor</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel=stylesheet href="static/codemirror/lib/codemirror.css">
    <link rel=stylesheet href="static/codemirror/doc/docs.css">
    <script src="static/codemirror/lib/codemirror.js"></script>
    <script src="static/codemirror/mode/xml/xml.js"></script>
    <script src="static/codemirror/mode/javascript/javascript.js"></script>
    <script src="static/codemirror/mode/css/css.js"></script>
    <script src="static/codemirror/mode/htmlmixed/htmlmixed.js"></script>
    <script src="static/codemirror/addon/edit/matchbrackets.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/codemirror/theme/dracula.css" rel="stylesheet">
    <link href="static/codemirror/theme/rubyblue.css" rel="stylesheet">
    <script src="static/codemirror/addon/edit/closetag.js"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <style>
        #resizable { width: 200px; height: 150px; padding: 5px; }
        #resizable h3 { text-align: center; margin: 0; }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <style>
        .CodeMirror { height: 90vh; width: 50vw; border: 1px solid #ddd; }
        .CodeMirror-scroll { max-height: 90vh; }
        body {
            min-height: 100vh;

            background: -webkit-gradient(linear, left bottom, right top, from( #001b2f ), to(#100000));
            background: -webkit-linear-gradient(bottom left, #001b2f 0%, #100000 100%);
            background: -moz-linear-gradient(bottom left, #001b2f 0%, #100000 100%);
            background: -o-linear-gradient(bottom left, #001b2f 0%, #100000 100%);
            background: linear-gradient(to top right, #001b2f 0%, #100000 100%);
        }

        iframe {
            /*top: 100;*/
            /*bottom: 0;*/
            /*position: relative;*/
            width: 49vw;
            height: 90vh;
            /*float: top;*/
            /*min-height: 500px;*/
            /*overflow: scroll;*/
            /*margin: auto;*/
            /*display: inline-block;*/
            background: #f4f4f9;
            /*outline: #00A7AA;*/
            /*font-family: Courier, sans-serif;*/
            /*font-size: 14px;*/
            /*color: red;*/
        }
        p1 {
            color : white;
        }
        h1 {
            color : white;
        }
    </style>

    <div class="container-fluid ">
        <div class="row ">
            <div class="col d-flex justify-content-start">
                <h1>simple and free code tester</h1>
            </div>
            <div class="col d-flex justify-content-end">
                <form action="http://15.165.77.159:8001/fnew1light" >
                    <button class="btn btn-light">Light mode</button>
            </div>
        </div>

    </div>


</head>

<body>
<div class="container-fluid">
    <div class="row px-0">
        <div class="col-6">
            <p1>HTML </p1>
            <textarea id="html" ><!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
  </head>
  <body>
    <h1>Hello world!</h1>
  </body>
</html></textarea>


        </div>

        <div class="col-6">
            <p1>Result </p1>
            <iframe id="code"></iframe>
<!--            <p1>ref: https://enlight.nyc/projects/code-editor</p1>-->
        </div>
    </div>
</div>
<script>
    var html = document.getElementById("html");

    var code = document.getElementById("code").contentWindow.document;
    document.body.onkeyup = function() {
        code.open();
        let text = "";
        for(let ii=0; ii<editor.display.view.length; ii++){
            text = text + editor.display.view[ii].line.text;

        };

        code.writeln( text  );
        code.close();
        //let acc = editor.display.view.reduce((acc,result)=>{
        //   acc = acc + result.line.text;
        //}, acc="");

        //editor.display.view.forEach(obj=>{
        //    text = text + obj.line.text;
        //});
    };
    var editor = CodeMirror.fromTextArea(document.getElementById("html"), {
        lineNumbers: true,
        mode: "text/html",
        matchBrackets: true,
        autocomplete: true,
        theme: "rubyblue",
        autoCloseTags: true

    });
    // editor.setSize("1000","150");
    // editor.autocomplete();

    var editor2 = CodeMirror.fromTextArea(document.getElementById("css"), {
        lineNumbers: true,
        mode: "text/css",
        matchBrackets: true,
        autocomplete: true,
        theme: "rubyblue",

    });
    var editor3 = CodeMirror.fromTextArea(document.getElementById("js"), {
        lineNumbers: true,
        mode: "text/javascript",
        matchBrackets: true,
        autocomplete: true,
        theme: "rubyblue",



    });
    $( function() {
        $( "#code" ).resizable({
            handles: 'n,w,s,e',
            maxHeight: 250,
            maxWidth: 350,
            minHeight: 150,
            minWidth: 200
        });
    } );
</script>
</body>
</html>
